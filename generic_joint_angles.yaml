############
## SPACES ##
############

- space: VirtualLab
  alignWithSegment:
    segment: Hips


############
## EVENTS ##
############

# - event: LFS
#   steps:
#     - velocity: LeftToeBase.z => ltb_vel
#     - negate: ltb_vel => ltb_vel_inv
#     - peakFinder: ltb_vel_inv
#       width: 3
#       distance: 100
#       height: 1

# - event: RFS
#   steps:
#     - velocity: RightToeBase.z => rtb_vel
#     - negate: rtb_vel => rtb_vel_inv
#     - peakFinder: rtb_vel_inv
#       width: 3
#       distance: 100
#       height: 1


############
## SERIES ##
############

# --- Pelvis ---

- parameter: Pelvic Angles
  set: right
  steps:
    - jointAngle: Hips
      space: VirtualLab
    - multiply: [$prev, [-1, 1, 1]]

# --- Hips ---

- parameter: Left Hip Angles
  set: left
  steps:
    - jointAngle: [Hips, LeftUpLeg]
    - multiply: [$prev, [1, -1, 1]]

- parameter: Right Hip Angles
  set: right
  steps:
    - jointAngle: [Hips, RightUpLeg]


# --- Knee ---

- parameter: Left Knee Angles
  set: left
  steps:
    - jointAngle: [LeftUpLeg, LeftLeg]
    - multiply: [$prev, [-1, -1, -1]]

- parameter: Right Knee Angles
  set: right
  steps:
    - jointAngle: [RightUpLeg, RightLeg]
    - multiply: [$prev, [-1, 1, 1]]

# --- Ankle ---

- parameter: Left Ankle Angles
  set: left
  steps:
    - jointAngle: [LeftLeg, LeftFoot]
    - multiply: [$prev, [1, -1, 1]]

- parameter: Right Ankle Angles
  set: right
  steps:
    - jointAngle: [RightLeg, RightFoot]


# --- Thorax ---

- parameter: Thorax Angles
  steps:
    - jointAngle: [Hips, Spine2]

# --- Shoulder ---

- parameter: Left Shoulder Angles
  set: left
  steps:
    - jointAngle: [Spine2, LeftArm]
    - multiply: [$prev, [1, 1, -1]]

- parameter: Right Shoulder Angles
  set: right
  steps:
    - jointAngle: [Spine2, RightArm]
    - multiply: [$prev, [1, -1, 1]]

# --- Elbow ---

- parameter: Left Elbow Angles
  set: left
  steps:
    - jointAngle: [LeftArm, LeftForeArm]
    - multiply: [$prev, [1, 1, -1]]

- parameter: Right Elbow Angles
  set: right
  steps:
    - angle: [RightArm, RightForeArm]

# --- Wrist ---

- parameter: Left Wrist Angles
  set: left
  steps:
    - jointAngle: [LeftForeArm, LeftHand]
    - multiply: [$prev, [1, 1, -1]]

- parameter: Right Wrist Angles
  set: right
  steps:
    - angle: [RightForeArm, RightHand]

# --- Head ---

- parameter: Head Angles
  set: left
  steps:
    - jointAngle: [Head, Spine2]


#############
## Metrics ##
#############
